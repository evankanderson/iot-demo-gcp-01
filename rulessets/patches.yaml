kinds:
  - serving.knative.dev/v1alpha1:Service
  - apps/v1:Deployment
labelsMatch:
  - airspot.krules.dev/type: ^rulesset$
patch:
  spec:
    template:
      spec:
        containers:
          - patch__0:
              volumeMounts:
                - name: config-krules-volume
                  mountPath: /krules/config

        volumes:
          - name: config-krules-volume
            configMap:
              name: config-krules

## uncomment if subjects redis storage backend enabled
#---
#kinds:
#  - serving.knative.dev/v1alpha1:Service
#labelsMatch:
#  - airspot.krules.dev/type: ^rulesset$
#patch:
#  spec:
#    template:
#      spec:
#        containers:
#          - patch__0:
#              env:
#                - name: KRULES_SUBJECTS_REDIS_URL
#                  valueFrom:
#                    secretKeyRef:
#                      name: config-krules-subjects-redis
#                      key: url